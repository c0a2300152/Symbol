# SSDLab Symbol Blockchain Tutorial (Chapter 3)
## SDKの導入と環境構築
### このチュートリアルでは、Symbolブロックチェーン上で最も基本的な「送金（TransferTransaction）」をプログラムから実行します。TypeScript 環境で実施します。

## 🖥️ Phase 0: ワークスペースの準備 (VS Code)
まず、VS Codeを立ち上げます。
0. WSLとUbuntuのインストール
コマンドプロンプト（またはPowerShell）を**「管理者として実行」**で開きます。
以下のコマンドを入力してEnterを押してください。
PowerShell
```wsl --install```

1. WSLへの接続
- VS Codeを起動します。
- 左下の緑色のボタン（><マーク）をクリックします。
- 「Connect to WSL (WSLへの接続)」 を選択します。

1. 作業フォルダを開く
- メニューバーの ファイル > フォルダを開く を選択します。
- 今回のチュートリアル用の作業場所（フォルダ）を作成・選択して OK を押します。

3. ターミナルを開く
- コマンドを入力するための画面を出します。
- メニューバーの ターミナル > 新しいターミナル を選択。
画面下部に黒い画面が出てくればOKです。

## 📋 Phase 1: 事前確認 (Node.js v22.11.0)
本チュートリアルでは v22.11.0 の利用を推奨します。

1. 現在のバージョンを確認
VS Codeのターミナルで以下のコマンドを入力してください。

```node -v```
## nodeがない、バージョンが違う場合
### v22.11.0 をインストール
```nvm install 22.11.0```

### v22.11.0 を有効化（すでに持っていてv22.11.0に切り替えたい場合）
```nvm use 22.11.0```
## 📋 Phase 2: レポジトリをクローンする
```git clone https://github.com/opening-line/symbol_book_v3_sdk.git```

### 作成されたフォルダの中の typescript ディレクトリに移動
```cd symbol_book_v3_sdk/typescript```

## 📍 Phase 3: ライブラリのインストール

### npmのインストール　※必ず、typescriptディレクトリに移動してから実行
```npm install```

## 🔑 Phase 4: 秘密鍵の設定 (.env)
####  プログラムに秘密鍵を直接書かないよう、環境変数ファイルを作成します。
1. 設定ファイルの作成
```cp .env.sample .env```
2. 「.env」ファイルの編集 ファイルを開き、2章で作成した「テストアカウントA」「テストアカウントB」の秘密鍵を入力します。
```
PRIVATE_KEY_A= ココに入力
PRIVATE_KEY_B= ココに入力
NODE_URL=https://sym-test-03.opening-line.jp:3001
```
## 📤 転送トランザクション (TransferTransaction)
#### 転送トランザクションとは、あるアカウントから別のアカウントへモザイクや、メッセージを送付するトランザクションです。単なる「送金」にとどまらず、以下の3つの要素を組み合わせてアカウント間の状態を変化させます。

受信者 (Recipient): 誰に送るか（アドレス）。
モザイク (Mosaic): 何をどれだけ送るか（資産）。
XYM: Symbolのネイティブ通貨。
独自モザイク: 研究室コイン、投票券、NFTなど、ユーザーが発行したトークン。
メッセージ (Message): どのようなデータを添付するか。
通常はテキストですが、オンチェーンに記録したいハッシュ値や、暗号化されたデータなどを最大1024バイトまで添付可能です。\
Point: このトランザクションを実行することで、ブロックチェーンという「分散台帳」に、AさんからBさんへ資産と情報が移動した事実が不可逆的に刻まれます。

## 💻 実行してみる
#### 以下のコマンドを実行して、プログラムからトランザクションを発行します。 ※ src/3_3_Transaction.ts は、.env ファイルから秘密鍵を読み込み、トランザクションを構築・署名・アナウンスするスクリプトです。

```npx tsx src/3_3_Transaction.ts```
## 実行結果の確認
#### 実行結果のURLにアクセスするとアカウントAからアカウントBにメッセージと1XYMが送信できたことが確認できる。

1. コンソールログ（進行状況）
Plaintext

===転送トランザクション===
アナウンス開始
アナウンス結果 { message: 'packet 9 was pushed to the network via /transactions' }
confirmed状態まで待機中..
confirmed完了!
承認結果 Success
承認状態 confirmed
トランザクションハッシュ F41B45901182D791E00000000000000000000000000AE426A15245DF9A3494DB
ブロック高 2974478
Symbolエクスプローラー  https://testnet.symbol.fyi/transactions/F41B45901182D7000000000000000000000000000000000005245DF9A3494DB
トランザクション情報を取得中・・・
2. トランザクション情報（JSON詳細）
JSON

トランザクション情報JSON表示 {
  "meta": {
    "height": "2974478",
    "hash": "F41B45901182D791E7200000000000000000000000000426A15245DF9A3494DB",
    "merkleComponentHash": "F41B4590110000000000000000000000000000000000000000245DF9A3494DB",
    "index": 0,
    "timestamp": "98959155383",
    "feeMultiplier": 100
  },
  "transaction": {
    "size": 193,
    "signature": "241B0E76F865C64B50134D5E15F1000000000000000000000000000000000000000000000000000000000000000000000000000000C5B933A1E2AE537B8CA202",
    "signerPublicKey": "50966C0924F60000000000000000000000000000000000000000009984B632D4",
    "version": 1,
    "network": 152,
    "type": 16724,
    "maxFee": "19300",
    "deadline": "98966350119",
    "recipientAddress": "980B0D777777777777777777777777777777777775B7D065",
    "message": "004866666666666666666666664221",
    "mosaics": [
      {
        "id": "72C0AAAAAAAABCE",
        "amount": "1000000"
      }
    ]
  },
  "id": "6946OOOOOOOOO7AEEA"
}
